<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Professional Resume Builder</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --secondary: #3f37c9;
      --dark: #1b263b;
      --light: #f8f9fa;
      --gray: #6c757d;
      --success: #4cc9f0;
      --danger: #f72585;
      --warning: #f8961e;
      --info: #560bad;
      --border-radius: 8px;
      --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    body.dark-mode {
      --primary: #3a86ff;
      --primary-light: #4cc9f0;
      --secondary: #8338ec;
      --dark: #f8f9fa;
      --light: #1b263b;
      --gray: #adb5bd;
      --bg: #121212;
      --card-bg: #1e1e1e;
      --text: #ffffff;
      --input-bg: #2d2d2d;
    }

    body {
      background-color: var(--light);
      color: var(--dark);
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: var(--primary);
      margin: 0;
      font-weight: 600;
    }

    h2 {
      color: var(--secondary);
      margin-top: 25px;
      font-weight: 500;
      border-bottom: 2px solid var(--primary-light);
      padding-bottom: 5px;
    }

    h3 {
      color: var(--primary);
      margin-top: 20px;
      font-weight: 500;
    }

    .form-section {
      background-color: var(--bg);
      padding: 25px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      margin-bottom: 30px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: var(--dark);
    }

    input, textarea, select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      font-family: 'Poppins', sans-serif;
      background-color: var(--input-bg);
      color: var(--dark);
      transition: var(--transition);
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(67, 97, 238, 0.2);
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 20px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-weight: 500;
      transition: var(--transition);
      margin-right: 10px;
      margin-bottom: 10px;
    }

    .btn i {
      margin-right: 8px;
    }

    .btn:hover {
      background-color: var(--secondary);
      transform: translateY(-2px);
    }

    .btn-outline {
      background-color: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }

    .btn-outline:hover {
      background-color: var(--primary);
      color: white;
    }

    .btn-danger {
      background-color: var(--danger);
    }

    .btn-danger:hover {
      background-color: #d1144a;
    }

    .btn-success {
      background-color: var(--success);
    }

    .btn-success:hover {
      background-color: #3aa8d8;
    }

    .btn-group {
      display: flex;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    .toggle-theme {
      background-color: var(--dark);
      color: var(--light);
    }

    .resume-section {
      background-color: white;
      padding: 30px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      margin-top: 30px;
    }

    .resume-header {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
    }

    .resume-photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 30px;
      border: 3px solid var(--primary);
    }

    .resume-contact {
      flex: 1;
    }

    .resume-name {
      color: var(--primary);
      margin: 0;
      font-size: 28px;
    }

    .resume-title {
      color: var(--gray);
      margin: 5px 0 15px;
      font-weight: 400;
    }

    .resume-contact-info {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }

    .contact-item {
      display: flex;
      align-items: center;
    }

    .contact-item i {
      margin-right: 8px;
      color: var(--primary);
    }

    .resume-section h2 {
      color: var(--primary);
      font-size: 20px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .education-item, .experience-item {
      margin-bottom: 20px;
    }

    .item-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
    }

    .item-title {
      font-weight: 600;
      color: var(--dark);
    }

    .item-date {
      color: var(--gray);
    }

    .item-subtitle {
      color: var(--primary);
      margin-bottom: 5px;
    }

    .skills-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .skill-tag {
      background-color: var(--primary-light);
      color: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 14px;
    }

    .footer {
      margin-top: 50px;
      padding: 30px 0;
      background-color: var(--dark);
      color: var(--light);
      text-align: center;
    }

    .footer-container {
      max-width: 1200px;
      margin: auto;
      padding: 0 20px;
    }

    .footer-info {
      margin-bottom: 20px;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .footer-links a {
      color: var(--light);
      text-decoration: none;
      transition: var(--transition);
    }

    .footer-links a:hover {
      color: var(--primary-light);
    }

    .footer-bottom {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .resume-header {
        flex-direction: column;
        text-align: center;
      }
      
      .resume-photo {
        margin-right: 0;
        margin-bottom: 20px;
      }
      
      .resume-contact-info {
        justify-content: center;
      }
      
      .btn-group {
        justify-content: center;
      }
    }

    /* Add more section button */
    .add-section {
      background-color: var(--success);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 10px 0;
      transition: var(--transition);
    }

    .add-section:hover {
      background-color: #3aa8d8;
      transform: rotate(90deg);
    }

    /* Dynamic sections */
    .dynamic-section {
      margin-bottom: 20px;
      padding: 15px;
      background-color: rgba(67, 97, 238, 0.05);
      border-radius: var(--border-radius);
      position: relative;
    }

    .remove-section {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: var(--danger);
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Template selector */
    .template-selector {
      margin-bottom: 20px;
    }

    .template-options {
      display: flex;
      gap: 15px;
      margin-top: 10px;
    }

    .template-option {
      width: 100px;
      height: 140px;
      border: 2px solid #ddd;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      overflow: hidden;
    }

    .template-option:hover {
      border-color: var(--primary);
      transform: translateY(-5px);
    }

    .template-option.active {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.3);
    }

    .template-preview {
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-file-alt"></i> Professional Resume Builder</h1>
      <button id="toggle-theme" class="btn toggle-theme">
        <i class="fas fa-moon"></i> Toggle Theme
      </button>
    </header>

    <div class="form-section">
      <h2><i class="fas fa-user-circle"></i> Personal Information</h2>
      <div class="form-group">
        <label for="photo">Profile Photo</label>
        <input type="file" id="photo" accept="image/*" />
      </div>
      <div class="form-group">
        <label for="name">Full Name</label>
        <input type="text" id="name" placeholder="John Doe" />
      </div>
      <div class="form-group">
        <label for="title">Professional Title</label>
        <input type="text" id="title" placeholder="Software Engineer" />
      </div>
      <div class="form-group">
        <label for="summary">Professional Summary</label>
        <textarea id="summary" placeholder="Brief summary of your professional background and skills"></textarea>
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" placeholder="john.doe@example.com" />
      </div>
      <div class="form-group">
        <label for="phone">Phone Number</label>
        <input type="tel" id="phone" placeholder="+1 (123) 456-7890" />
      </div>
      <div class="form-group">
        <label for="address">Address</label>
        <input type="text" id="address" placeholder="123 Main St, City, Country" />
      </div>
      <div class="form-group">
        <label for="linkedin">LinkedIn</label>
        <input type="url" id="linkedin" placeholder="https://linkedin.com/in/username" />
      </div>
      <div class="form-group">
        <label for="github">GitHub</label>
        <input type="url" id="github" placeholder="https://github.com/username" />
      </div>
      <div class="form-group">
        <label for="website">Personal Website</label>
        <input type="url" id="website" placeholder="https://yourwebsite.com" />
      </div>

      <h2><i class="fas fa-graduation-cap"></i> Education</h2>
      <div id="education-section">
        <div class="dynamic-section">
          <div class="form-group">
            <label for="degree">Degree</label>
            <select id="degree">
              <option value="">Select Degree</option>
              <option value="High School Diploma">High School Diploma</option>
              <option value="Associate Degree">Associate Degree</option>
              <option value="Bachelor's Degree">Bachelor's Degree</option>
              <option value="Master's Degree">Master's Degree</option>
              <option value="PhD">PhD</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="course">Field of Study</label>
            <input type="text" id="course" placeholder="Computer Science" />
          </div>
          <div class="form-group">
            <label for="college">Institution Name</label>
            <input type="text" id="college" placeholder="University of Example" />
          </div>
          <div class="form-group">
            <label for="college-location">Location</label>
            <input type="text" id="college-location" placeholder="City, Country" />
          </div>
          <div class="form-group">
            <label for="gpa">GPA / Score</label>
            <input type="text" id="gpa" placeholder="3.8/4.0 or 90%" />
          </div>
          <div class="form-group">
            <label for="education-start">Start Date</label>
            <input type="month" id="education-start" />
          </div>
          <div class="form-group">
            <label for="education-end">End Date (or expected)</label>
            <input type="month" id="education-end" />
          </div>
          <div class="form-group">
            <label for="education-description">Description (optional)</label>
            <textarea id="education-description" placeholder="Thesis, honors, relevant coursework"></textarea>
          </div>
        </div>
      </div>
      <button class="add-section" id="add-education"><i class="fas fa-plus"></i></button>

      <h2><i class="fas fa-briefcase"></i> Work Experience</h2>
      <div id="experience-section">
        <div class="dynamic-section">
          <div class="form-group">
            <label for="job-title">Job Title</label>
            <input type="text" id="job-title" placeholder="Software Developer" />
          </div>
          <div class="form-group">
            <label for="company">Company</label>
            <input type="text" id="company" placeholder="Tech Company Inc." />
          </div>
          <div class="form-group">
            <label for="company-location">Location</label>
            <input type="text" id="company-location" placeholder="City, Country" />
          </div>
          <div class="form-group">
            <label for="employment-type">Employment Type</label>
            <select id="employment-type">
              <option value="Full-time">Full-time</option>
              <option value="Part-time">Part-time</option>
              <option value="Contract">Contract</option>
              <option value="Freelance">Freelance</option>
              <option value="Internship">Internship</option>
            </select>
          </div>
          <div class="form-group">
            <label for="job-start">Start Date</label>
            <input type="month" id="job-start" />
          </div>
          <div class="form-group">
            <label for="job-end">End Date (leave blank if current)</label>
            <input type="month" id="job-end" />
          </div>
          <div class="form-group">
            <label for="job-description">Description</label>
            <textarea id="job-description" placeholder="Your responsibilities and achievements"></textarea>
          </div>
        </div>
      </div>
      <button class="add-section" id="add-experience"><i class="fas fa-plus"></i></button>

      <h2><i class="fas fa-code"></i> Skills</h2>
      <div class="form-group">
        <label for="skills">Technical Skills (comma separated)</label>
        <textarea id="skills" placeholder="JavaScript, Python, React, Node.js, SQL"></textarea>
      </div>
      <div class="form-group">
        <label for="soft-skills">Soft Skills (comma separated)</label>
        <textarea id="soft-skills" placeholder="Leadership, Communication, Teamwork, Problem-solving"></textarea>
      </div>
      <div class="form-group">
        <label for="languages">Languages (comma separated with proficiency)</label>
        <textarea id="languages" placeholder="English (Native), Spanish (Fluent), French (Intermediate)"></textarea>
      </div>

      <h2><i class="fas fa-project-diagram"></i> Projects</h2>
      <div id="projects-section">
        <div class="dynamic-section">
          <div class="form-group">
            <label for="project-name">Project Name</label>
            <input type="text" id="project-name" placeholder="E-commerce Website" />
          </div>
          <div class="form-group">
            <label for="project-role">Your Role</label>
            <input type="text" id="project-role" placeholder="Full-stack Developer" />
          </div>
          <div class="form-group">
            <label for="project-url">Project URL (if available)</label>
            <input type="url" id="project-url" placeholder="https://example.com" />
          </div>
          <div class="form-group">
            <label for="project-date">Date Completed</label>
            <input type="month" id="project-date" />
          </div>
          <div class="form-group">
            <label for="project-description">Description</label>
            <textarea id="project-description" placeholder="Technologies used and your contributions"></textarea>
          </div>
        </div>
      </div>
      <button class="add-section" id="add-project"><i class="fas fa-plus"></i></button>

      <h2><i class="fas fa-certificate"></i> Certifications</h2>
      <div id="certifications-section">
        <div class="dynamic-section">
          <div class="form-group">
            <label for="cert-name">Certification Name</label>
            <input type="text" id="cert-name" placeholder="AWS Certified Developer" />
          </div>
          <div class="form-group">
            <label for="cert-org">Issuing Organization</label>
            <input type="text" id="cert-org" placeholder="Amazon Web Services" />
          </div>
          <div class="form-group">
            <label for="cert-date">Date Obtained</label>
            <input type="month" id="cert-date" />
          </div>
          <div class="form-group">
            <label for="cert-id">Credential ID (if applicable)</label>
            <input type="text" id="cert-id" placeholder="XYZ123456" />
          </div>
          <div class="form-group">
            <label for="cert-url">Credential URL (if available)</label>
            <input type="url" id="cert-url" placeholder="https://example.com/verify" />
          </div>
        </div>
      </div>
      <button class="add-section" id="add-certification"><i class="fas fa-plus"></i></button>

      <h2><i class="fas fa-trophy"></i> Achievements</h2>
      <div id="achievements-section">
        <div class="dynamic-section">
          <div class="form-group">
            <label for="achievement-title">Achievement Title</label>
            <input type="text" id="achievement-title" placeholder="Hackathon Winner" />
          </div>
          <div class="form-group">
            <label for="achievement-date">Date</label>
            <input type="month" id="achievement-date" />
          </div>
          <div class="form-group">
            <label for="achievement-description">Description</label>
            <textarea id="achievement-description" placeholder="Details about your achievement"></textarea>
          </div>
        </div>
      </div>
      <button class="add-section" id="add-achievement"><i class="fas fa-plus"></i></button>

      <h2><i class="fas fa-users"></i> References</h2>
      <div class="form-group">
        <label for="references">References (optional)</label>
        <textarea id="references" placeholder="Available upon request or list name, title, company, and contact info"></textarea>
      </div>

      <h2><i class="fas fa-paint-brush"></i> Resume Template</h2>
      <div class="template-selector">
        <label>Select a template style:</label>
        <div class="template-options">
          <div class="template-option active" data-template="professional">
            <div class="template-preview" style="background-color: #4361ee;"></div>
          </div>
          <div class="template-option" data-template="modern">
            <div class="template-preview" style="background-color: #3a0ca3;"></div>
          </div>
          <div class="template-option" data-template="creative">
            <div class="template-preview" style="background-color: #f72585;"></div>
          </div>
          <div class="template-option" data-template="minimal">
            <div class="template-preview" style="background-color: #4cc9f0;"></div>
          </div>
        </div>
      </div>

      <div class="btn-group">
        <button onclick="generateResume()" class="btn btn-success">
          <i class="fas fa-eye"></i> Preview Resume
        </button>
        <button onclick="printResume()" class="btn">
          <i class="fas fa-print"></i> Print Resume
        </button>
        <button onclick="downloadPDF()" class="btn btn-outline">
          <i class="fas fa-file-pdf"></i> Export as PDF
        </button>
        <button onclick="saveResume()" class="btn">
          <i class="fas fa-save"></i> Save Draft
        </button>
        <button onclick="loadResume()" class="btn btn-outline">
          <i class="fas fa-folder-open"></i> Load Draft
        </button>
        <button onclick="resetForm()" class="btn btn-danger">
          <i class="fas fa-trash"></i> Reset Form
        </button>
      </div>
    </div>

    <div class="resume-section" id="resume-preview">
      <div style="text-align: center; padding: 30px;">
        <h2>Your Resume Preview Will Appear Here</h2>
        <p>Fill out the form above and click "Preview Resume" to generate your professional resume.</p>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-info">
        <p><strong>Professional Resume Builder</strong> - Create stunning resumes that get you hired</p>
        <p>Created with <i class="fas fa-heart" style="color: #f72585;"></i> by Vamshi Krishna Nagula</p>
      </div>
      <div class="footer-links">
        <a href="mailto:nagulavamshi1453@gmail.com"><i class="fas fa-envelope"></i> Email</a>
        <a href="tel:+916305844568"><i class="fas fa-phone"></i> Phone</a>
        <a href="https://www.linkedin.com/in/nagula-vamshi-174b6833a/" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a>
        <a href="https://github.com/Vamshikrishna0372" target="_blank"><i class="fab fa-github"></i> GitHub</a>
      </div>
      <div class="footer-bottom">
        <p>© 2023 Professional Resume Builder. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Theme toggle
    document.getElementById('toggle-theme').addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const icon = document.querySelector('#toggle-theme i');
      if (document.body.classList.contains('dark-mode')) {
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
      } else {
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
      }
    });

    // Template selection
    const templateOptions = document.querySelectorAll('.template-option');
    templateOptions.forEach(option => {
      option.addEventListener('click', () => {
        templateOptions.forEach(opt => opt.classList.remove('active'));
        option.classList.add('active');
        // You would implement template switching logic here
      });
    });

    // Dynamic section management
    function addDynamicSection(sectionId, btnId) {
      const btn = document.getElementById(btnId);
      const section = document.getElementById(sectionId);
      
      btn.addEventListener('click', () => {
        const newSection = document.createElement('div');
        newSection.className = 'dynamic-section';
        newSection.innerHTML = section.firstElementChild.innerHTML + 
          '<button class="remove-section" onclick="this.parentElement.remove()"><i class="fas fa-times"></i></button>';
        section.appendChild(newSection);
      });
    }

    // Initialize dynamic sections
    addDynamicSection('education-section', 'add-education');
    addDynamicSection('experience-section', 'add-experience');
    addDynamicSection('projects-section', 'add-project');
    addDynamicSection('certifications-section', 'add-certification');
    addDynamicSection('achievements-section', 'add-achievement');

    // Generate Resume
    function generateResume() {
      // Get all form data
      const personalInfo = {
        name: document.getElementById('name').value,
        title: document.getElementById('title').value,
        summary: document.getElementById('summary').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        address: document.getElementById('address').value,
        linkedin: document.getElementById('linkedin').value,
        github: document.getElementById('github').value,
        website: document.getElementById('website').value,
        photo: document.getElementById('photo').files[0]
      };

      // Get education data
      const education = [];
      document.querySelectorAll('#education-section .dynamic-section').forEach(section => {
        education.push({
          degree: section.querySelector('#degree').value,
          course: section.querySelector('#course').value,
          college: section.querySelector('#college').value,
          location: section.querySelector('#college-location').value,
          gpa: section.querySelector('#gpa').value,
          start: section.querySelector('#education-start').value,
          end: section.querySelector('#education-end').value,
          description: section.querySelector('#education-description').value
        });
      });

      // Get experience data
      const experience = [];
      document.querySelectorAll('#experience-section .dynamic-section').forEach(section => {
        experience.push({
          title: section.querySelector('#job-title').value,
          company: section.querySelector('#company').value,
          location: section.querySelector('#company-location').value,
          type: section.querySelector('#employment-type').value,
          start: section.querySelector('#job-start').value,
          end: section.querySelector('#job-end').value,
          description: section.querySelector('#job-description').value
        });
      });

      // Get skills data
      const skills = {
        technical: document.getElementById('skills').value,
        soft: document.getElementById('soft-skills').value,
        languages: document.getElementById('languages').value
      };

      // Get projects data
      const projects = [];
      document.querySelectorAll('#projects-section .dynamic-section').forEach(section => {
        projects.push({
          name: section.querySelector('#project-name').value,
          role: section.querySelector('#project-role').value,
          url: section.querySelector('#project-url').value,
          date: section.querySelector('#project-date').value,
          description: section.querySelector('#project-description').value
        });
      });

      // Get certifications data
      const certifications = [];
      document.querySelectorAll('#certifications-section .dynamic-section').forEach(section => {
        certifications.push({
          name: section.querySelector('#cert-name').value,
          org: section.querySelector('#cert-org').value,
          date: section.querySelector('#cert-date').value,
          id: section.querySelector('#cert-id').value,
          url: section.querySelector('#cert-url').value
        });
      });

      // Get achievements data
      const achievements = [];
      document.querySelectorAll('#achievements-section .dynamic-section').forEach(section => {
        achievements.push({
          title: section.querySelector('#achievement-title').value,
          date: section.querySelector('#achievement-date').value,
          description: section.querySelector('#achievement-description').value
        });
      });

      // Get references
      const references = document.getElementById('references').value;

      // Store all data
      const resumeData = {
        personalInfo,
        education,
        experience,
        skills,
        projects,
        certifications,
        achievements,
        references
      };

      localStorage.setItem('resumeData', JSON.stringify(resumeData));

      // Generate HTML for the resume
      generateResumeHTML(resumeData);
    }

    function generateResumeHTML(data) {
      const resumePreview = document.getElementById('resume-preview');
      let html = `
        <div class="resume-header">
      `;

      // Handle photo
      const photoInput = document.getElementById('photo');
      if (photoInput.files && photoInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
          html += `<img src="${e.target.result}" class="resume-photo" alt="Profile Photo">`;
          html += generateResumeContent(data);
          resumePreview.innerHTML = html;
        };
        reader.readAsDataURL(photoInput.files[0]);
      } else {
        html += `<div class="resume-photo" style="background-color: #ddd; display: flex; align-items: center; justify-content: center;">
                  <i class="fas fa-user" style="font-size: 50px; color: #777;"></i>
                </div>`;
        html += generateResumeContent(data);
        resumePreview.innerHTML = html;
      }
    }

    function generateResumeContent(data) {
      let html = `
        <div class="resume-contact">
          <h1 class="resume-name">${data.personalInfo.name || 'Your Name'}</h1>
          <p class="resume-title">${data.personalInfo.title || 'Professional Title'}</p>
          <div class="resume-contact-info">
            ${data.personalInfo.email ? `<div class="contact-item"><i class="fas fa-envelope"></i> ${data.personalInfo.email}</div>` : ''}
            ${data.personalInfo.phone ? `<div class="contact-item"><i class="fas fa-phone"></i> ${data.personalInfo.phone}</div>` : ''}
            ${data.personalInfo.address ? `<div class="contact-item"><i class="fas fa-map-marker-alt"></i> ${data.personalInfo.address}</div>` : ''}
            ${data.personalInfo.linkedin ? `<div class="contact-item"><i class="fab fa-linkedin"></i> ${data.personalInfo.linkedin}</div>` : ''}
            ${data.personalInfo.github ? `<div class="contact-item"><i class="fab fa-github"></i> ${data.personalInfo.github}</div>` : ''}
            ${data.personalInfo.website ? `<div class="contact-item"><i class="fas fa-globe"></i> ${data.personalInfo.website}</div>` : ''}
          </div>
        </div>
      </div>

      ${data.personalInfo.summary ? `
      <div class="resume-section">
        <h2><i class="fas fa-user-tie"></i> Professional Summary</h2>
        <p>${data.personalInfo.summary}</p>
      </div>
      ` : ''}

      ${data.education.length > 0 ? `
      <div class="resume-section">
        <h2><i class="fas fa-graduation-cap"></i> Education</h2>
        ${data.education.map(edu => `
          <div class="education-item">
            <div class="item-header">
              <span class="item-title">${edu.degree || 'Degree'}, ${edu.course || 'Field of Study'}</span>
              <span class="item-date">${formatDateRange(edu.start, edu.end)}</span>
            </div>
            <p class="item-subtitle">${edu.college || 'Institution'} ${edu.location ? `, ${edu.location}` : ''}</p>
            ${edu.gpa ? `<p><strong>GPA:</strong> ${edu.gpa}</p>` : ''}
            ${edu.description ? `<p>${edu.description}</p>` : ''}
          </div>
        `).join('')}
      </div>
      ` : ''}

      ${data.experience.length > 0 ? `
      <div class="resume-section">
        <h2><i class="fas fa-briefcase"></i> Work Experience</h2>
        ${data.experience.map(exp => `
          <div class="experience-item">
            <div class="item-header">
              <span class="item-title">${exp.title || 'Position'} at ${exp.company || 'Company'}</span>
              <span class="item-date">${formatDateRange(exp.start, exp.end)}</span>
            </div>
            <p class="item-subtitle">${exp.location || 'Location'} • ${exp.type || 'Employment Type'}</p>
            ${exp.description ? `<p>${exp.description.replace(/\n/g, '<br>')}</p>` : ''}
          </div>
        `).join('')}
      </div>
      ` : ''}

      ${data.skills.technical || data.skills.soft || data.skills.languages ? `
      <div class="resume-section">
        <h2><i class="fas fa-code"></i> Skills</h2>
        ${data.skills.technical ? `
          <h3>Technical Skills</h3>
          <div class="skills-list">
            ${data.skills.technical.split(',').map(skill => `
              <span class="skill-tag">${skill.trim()}</span>
            `).join('')}
          </div>
        ` : ''}
        
        ${data.skills.soft ? `
          <h3>Soft Skills</h3>
          <div class="skills-list">
            ${data.skills.soft.split(',').map(skill => `
              <span class="skill-tag">${skill.trim()}</span>
            `).join('')}
          </div>
        ` : ''}
        
        ${data.skills.languages ? `
          <h3>Languages</h3>
          <div class="skills-list">
            ${data.skills.languages.split(',').map(lang => `
              <span class="skill-tag">${lang.trim()}</span>
            `).join('')}
          </div>
        ` : ''}
      </div>
      ` : ''}

      ${data.projects.length > 0 ? `
      <div class="resume-section">
        <h2><i class="fas fa-project-diagram"></i> Projects</h2>
        ${data.projects.map(proj => `
          <div class="project-item">
            <div class="item-header">
              <span class="item-title">${proj.name || 'Project Name'}</span>
              ${proj.date ? `<span class="item-date">${formatDate(proj.date)}</span>` : ''}
            </div>
            ${proj.role ? `<p class="item-subtitle">Role: ${proj.role}</p>` : ''}
            ${proj.url ? `<p><strong>URL:</strong> <a href="${proj.url}" target="_blank">${proj.url}</a></p>` : ''}
            ${proj.description ? `<p>${proj.description.replace(/\n/g, '<br>')}</p>` : ''}
          </div>
        `).join('')}
      </div>
      ` : ''}

      ${data.certifications.length > 0 ? `
      <div class="resume-section">
        <h2><i class="fas fa-certificate"></i> Certifications</h2>
        ${data.certifications.map(cert => `
          <div class="certification-item">
            <div class="item-header">
              <span class="item-title">${cert.name || 'Certification Name'}</span>
              ${cert.date ? `<span class="item-date">${formatDate(cert.date)}</span>` : ''}
            </div>
            <p class="item-subtitle">Issued by ${cert.org || 'Organization'}</p>
            ${cert.id ? `<p><strong>Credential ID:</strong> ${cert.id}</p>` : ''}
            ${cert.url ? `<p><strong>URL:</strong> <a href="${cert.url}" target="_blank">${cert.url}</a></p>` : ''}
          </div>
        `).join('')}
      </div>
      ` : ''}

      ${data.achievements.length > 0 ? `
      <div class="resume-section">
        <h2><i class="fas fa-trophy"></i> Achievements</h2>
        ${data.achievements.map(ach => `
          <div class="achievement-item">
            <div class="item-header">
              <span class="item-title">${ach.title || 'Achievement Title'}</span>
              ${ach.date ? `<span class="item-date">${formatDate(ach.date)}</span>` : ''}
            </div>
            ${ach.description ? `<p>${ach.description.replace(/\n/g, '<br>')}</p>` : ''}
          </div>
        `).join('')}
      </div>
      ` : ''}

      ${data.references ? `
      <div class="resume-section">
        <h2><i class="fas fa-users"></i> References</h2>
        <p>${data.references.replace(/\n/g, '<br>')}</p>
      </div>
      ` : ''}
      `;

      return html;
    }

    // Helper functions
    function formatDate(dateString) {
      if (!dateString) return '';
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short' });
    }

    function formatDateRange(start, end) {
      if (!start) return '';
      const startDate = formatDate(start);
      const endDate = end ? formatDate(end) : 'Present';
      return `${startDate} - ${endDate}`;
    }

    // Save and load functions
    function saveResume() {
      generateResume(); // This saves to localStorage
      alert('Resume draft saved successfully!');
    }

    function loadResume() {
      const savedData = localStorage.getItem('resumeData');
      if (savedData) {
        const data = JSON.parse(savedData);
        // You would implement form population logic here
        alert('Resume draft loaded successfully!');
        generateResumeHTML(data);
      } else {
        alert('No saved resume found!');
      }
    }

    function resetForm() {
      if (confirm('Are you sure you want to reset the form? All data will be lost.')) {
        document.querySelector('form').reset();
        document.getElementById('resume-preview').innerHTML = `
          <div style="text-align: center; padding: 30px;">
            <h2>Your Resume Preview Will Appear Here</h2>
            <p>Fill out the form above and click "Preview Resume" to generate your professional resume.</p>
          </div>
        `;
      }
    }

    // Print and PDF functions
    function printResume() {
      const printContent = document.getElementById('resume-preview').innerHTML;
      const originalContent = document.body.innerHTML;
      
      
    }

    async function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const element = document.getElementById('resume-preview');
      
      // Use html2canvas to capture the resume
      const canvas = await html2canvas(element, {
        scale: 2,
        logging: false,
        useCORS: true
      });
      
      const imgData = canvas.toDataURL('image/png');
      const pdf = new jsPDF('p', 'mm', 'a4');
      const imgProps = pdf.getImageProperties(imgData);
      const pdfWidth = pdf.internal.pageSize.getWidth();
      const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
      
      pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
      pdf.save('resume.pdf');
    }

    // Initialize form with sample data for demo
    function initSampleData() {
      if (!localStorage.getItem('resumeData') && confirm('Would you like to load sample data for demonstration?')) {
        const sampleData = {
          personalInfo: {
            name: "John Doe",
            title: "Senior Software Engineer",
            summary: "Experienced software engineer with 5+ years of expertise in full-stack development. Specialized in JavaScript frameworks and cloud technologies. Passionate about creating efficient, scalable solutions and mentoring junior developers.",
            email: "john.doe@example.com",
            phone: "+1 (123) 456-7890",
            address: "123 Main St, San Francisco, CA",
            linkedin: "https://linkedin.com/in/johndoe",
            github: "https://github.com/johndoe",
            website: "https://johndoe.dev"
          },
          education: [{
            degree: "Master's Degree",
            course: "Computer Science",
            college: "Stanford University",
            location: "Stanford, CA",
            gpa: "3.8/4.0",
            start: "2015-09",
            end: "2017-06",
            description: "Specialization in Artificial Intelligence. Thesis on 'Neural Networks for Image Recognition'."
          }],
          experience: [{
            title: "Senior Software Engineer",
            company: "Tech Solutions Inc.",
            location: "San Francisco, CA",
            type: "Full-time",
            start: "2019-03",
            end: "",
            description: "Lead a team of 5 developers in building scalable web applications.\n• Implemented microservices architecture reducing server costs by 30%\n• Introduced CI/CD pipeline improving deployment frequency by 40%"
          }, {
            title: "Software Developer",
            company: "Digital Innovations",
            location: "San Jose, CA",
            type: "Full-time",
            start: "2017-07",
            end: "2019-02",
            description: "Developed and maintained company's flagship product using React and Node.js.\n• Optimized database queries reducing page load time by 25%\n• Implemented automated testing increasing code coverage to 85%"
          }],
          skills: {
            technical: "JavaScript, TypeScript, React, Node.js, Python, AWS, Docker, Kubernetes, SQL, MongoDB",
            soft: "Leadership, Teamwork, Problem-solving, Communication, Agile Methodologies",
            languages: "English (Native), Spanish (Intermediate)"
          },
          projects: [{
            name: "E-commerce Platform",
            role: "Full-stack Developer",
            url: "https://example-ecommerce.com",
            date: "2022-05",
            description: "Built a scalable e-commerce platform with React frontend and Node.js backend.\n• Implemented payment gateway integration\n• Developed admin dashboard with analytics"
          }],
          certifications: [{
            name: "AWS Certified Solutions Architect",
            org: "Amazon Web Services",
            date: "2021-11",
            id: "AWS-123456",
            url: "https://aws.amazon.com/certification"
          }],
          achievements: [{
            title: "Hackathon Winner",
            date: "2020-10",
            description: "Won first place in CodeFest 2020 for developing an AI-powered productivity app."
          }],
          references: "Available upon request"
        };

        localStorage.setItem('resumeData', JSON.stringify(sampleData));
        generateResumeHTML(sampleData);
      }
    }

    // Initialize on page load
    window.onload = function() {
      initSampleData();
    };
  </script>
</body>
</html>